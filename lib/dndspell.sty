% D&D 4E style spells

%spells
\newtcolorbox{spellbox}[2][]{
    enhanced,
    arc=15pt,
    colbacktitle=titlered,
    colback=monstertan,
    fonttitle=\bfseries\color{white}\Large,
    title=#2,
    sharp corners,
    frame hidden,
    before skip=8pt plus2pt,
    breakable,
    fontupper=\fontfamily{lmss}\selectfont,
    after={\vspace{7pt plus 1pt}\noindent},
    #1
}

\newenvironment{spellaction}[1][\unskip]{\emph{\textbf{#1.}}}{\vspace{0.5em}}

% Spell Environment
\newenvironment{spelltable}{
	\par\vspace*{2pt}
    \noindent
    \fontfamily{lmss}\selectfont %Select font
    \rowcolors{1}{monstertan}{monstertandark} % Alternate colors
    \tabularx{\linewidth}{XX}
	}
	{\vspace{2pt plus 1pt}\noindent\endtabularx}

%
% Macros for use within the spell environment
%
\newkeycommand\spelldetails[level=Cantrip,
                    school=Abjuration,
                    restrict=All,
                    time=1 action,
                    range=Touch,
                    duration=Instant,
                    components={V, S, M},
                    ritual=No]{%
    \textit{\commandkey{level} level \commandkey{school}  \ifthenelse{\equal{\commandkey{ritual}}{yes}{(ritual)}}}\\
    \begin{spelltable}
    \textbf{Time}  & \commandkey{time}\\
    \textbf{Range}  & \commandkey{range}\\
    \textbf{Duration}  & \commandkey{duration}\\
    \textbf{Components}  & \commandkey{components}\\
    \textbf{Restricted}  & \commandkey{restrict}
    \end{spelltable}
}
